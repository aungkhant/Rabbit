<html>
<head>
<title>Zawgyi to Unicode</title>
<meta charset="utf-8"/>
<script src="rabbit.js"></script>
<style type="text/css">
	body {
		text-align: center;
		color: #242424;
	}
	#container {
		width: 900px;
		margin: 0 auto;
	}
	#cFont {
		padding: 10px;
		color: #5799DA;
	}
	textarea {
		padding: 10px;
		border: 1px solid #5799DA;
	}
	.btn {
		padding: 10px 20px;
		border: 2px solid #3E9AF5;
		background: #fff;
	}
	.btn:hover {
		background: #e9e9e9;
	}
</style>
</head>
<body>
<div id="container">
	<header>
		<img src="rabbit_100.png" align="middle">
		<h2 style="display:inline;font-family:Helvetica,Arial,sans-serif;padding-left:5px">Rabbit</h2>
	</header>

	<div style="width:40%;padding-right:5px;display:inline-block">
        <h3>Unicode</h3>
	<textarea rows="10" cols="10" id="unicode" style="font-size:18px;font-family:'MON3 Anonta 1';height:50%;width:100%" onfocus="handleOnFocus(this)" onblur="handleOnBlur()"></textarea>
</div>
	<div style="width:40%;padding-left:5px;display:inline-block">
        <h3>Zawgyi</h3>
		<textarea rows="10" cols="10" id="zawgyi" style="width:40%;font-size:18px;font-family:'Zawgyi-One';height:50%;width:100%" onfocus="handleOnFocus(this)" onblur="handleOnBlur()"></textarea>
	</div>

	<p>
		Found a bug ? Please , open <a href="https://github.com/Rabbit-Converter/Rabbit/issues/new">new issue</a>.
	</p>
</div>

<script>

var textFieldInFocus;
function handleOnFocus(form_element)
{
   textFieldInFocus = form_element;
}
function handleOnBlur()
{
   textFieldInFocus = null;
}

var unicode = document.getElementById("unicode");
var zawgyi = document.getElementById("zawgyi");

onchangeHandler(unicode,zawgyi,"uni2zg");
onchangeHandler(zawgyi,unicode,"zg2uni");

function converter(textField,tochangeField,toconv) {
    if(tochangeField != textFieldInFocus) {
        if(toconv == "uni2zg") {
              tochangeField.value = Rabbit.uni2zg(textField.value);
        }
        else {
             tochangeField.value = Rabbit.zg2uni(textField.value);
        }
    }
}

function onchangeHandler(textField,tochangeField,toconv) {
    
    if (textField.addEventListener) {
      textField.addEventListener('input', function() {
          converter(textField,tochangeField,toconv);
      }, false);
    } else if (textField.attachEvent) {
      textField.attachEvent('onpropertychange', function() {
        // IE
          converter(textField,tochangeField,toconv);
      });
    }
    
}

</script>
</body>
</html>
